import{r as s,h as t}from"./p-3278c467.js";import{U as a,W as e}from"./p-51b2ba9a.js";import{m as i}from"./p-349cadab.js";const r="YYYY-MM-DD HH:mm:ss",l=(s,t)=>s.id>t.id?1:-1;class o{constructor(t){s(this,t),this.alarms=[],this.serverMsg="",this.currentTime=i().format(r),this.componentDidLoad=async()=>{await this.getTime(),await this.getAlarms()},this.getTime=async()=>{const s=await a.get("time.json"),t=await s.json();s.ok?this.currentTime=i(t.data.utc,r+" UTC").format(r):this.serverMsg=t.message},this.getAlarms=async()=>{const s=await a.get("alarms.json"),t=await s.json();s.ok?this.alarms=a.parseAlarms(t.data).sort(l):this.serverMsg=t.message},this.removeAlarm=async s=>{const t=await a.get("api.json",{delaid:s}),e=await t.json();t.ok?this.alarms=this.alarms.filter(t=>t.id!==s).sort(l):this.serverMsg=e.message},this.toggle=async s=>{const t=await a.get("api.json",{toggleaid:s.id}),e=await t.json();if(t.ok){const t=this.alarms.filter(t=>s.id!==t.id);s.enabled=!s.enabled,this.alarms=[...t,s].sort(l)}else this.serverMsg=e.message}}render(){const s=this.alarms.sort((s,t)=>t.id-s.id).map(s=>{const a=s.hour<12?"AM":"PM";let i="PM"===a?s.hour-12:s.hour;0==i&&(i=12);const r=s.min<10?`0${s.min}`:s.min,l=s.days?e.map((a,e)=>t("div",{class:`day ${s.days[`${e}`]?"active":""}`},a)):"",o=1!==s.freq?"days":"day",n=t("div",{class:"weekdays"},l),m=t("div",{class:"frequency"},"Every ",s.freq," ",o),c=s.freq?m:n;return t("li",{class:"item"},t("div",{class:"switch"},t("toggle-switch",{enabled:s.enabled,vertical:!0,toggleClick:()=>this.toggle(s)})),t("div",{class:"time"},t("span",{class:"hour"},i),t("span",{class:"colon"},":"),t("span",{class:"minute"},r),t("span",{class:"meridian"},a)),t("div",{class:"days"},c),t("div",{class:"buttons"},t("icon-button",{face:"remove",buttonClick:()=>this.removeAlarm(s.id)})))});return t("div",{class:"list"},t("nav-header",null),t("server-notice",{message:this.serverMsg}),t("h2",null,"The time is: ",i(this.currentTime).format(r)),t("stencil-route-link",{url:"/edit"},t("post-button",null,"Add Alarm")),t("h2",null,"The Box will UNLOCK at these times."),t("ul",{class:"items"},s))}static get style(){return".list{max-width:640px;margin:0 auto}.item{display:grid;grid-template-columns:35px 190px 1fr 40px;grid-gap:16px;padding:24px 12px;background-color:#eee;margin:8px 0;border-radius:6px;-webkit-box-shadow:inset 0 0 15px #444,1px 3px 6px rgba(0,0,0,.6);box-shadow:inset 0 0 15px #444,1px 3px 6px rgba(0,0,0,.6)}.switch{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.enable p{margin:0}h1{font-size:35px;margin-bottom:0}h1,h2{color:#fff;font-weight:100;text-align:center}h2{font-size:18px;margin:20px 0 10px 0}ul{list-style:none;padding:0}a{text-decoration:none}.time{display:-ms-flexbox;display:flex;-ms-flex-align:end;align-items:flex-end;-ms-flex-pack:end;justify-content:flex-end;font-size:45px;line-height:55px}.meridian{color:#666;padding:0 5px;margin:0 5px;font-size:30px;text-transform:uppercase}.weekdays{display:block;font-size:.8em}.day{border-radius:3px;display:inline-block;padding:6px 7px;margin:0 5px 3px 0}.weekdays{color:#999}.frequency{font-size:45px;line-height:55px}.active{border-color:#444;background-color:#666;color:#fff}.buttons{display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around}\@media (max-width:768px){.list{margin:0 4px}.time{-ms-flex-pack:start;justify-content:flex-start;-ms-flex-align:center;align-items:center;font-size:1.8em}.frequency{font-size:20px;line-height:20px}.meridian{font-size:inherit}.switch{-ms-flex-align:center;align-items:center;grid-row:1/3}.item{position:relative;display:grid;grid-template-columns:50px 120px 1fr;grid-gap:8px;padding:0 12px}.weekdays{width:198px;height:68px;padding:14px 0 0 0}.day{display:inline-block;padding:4px 8px;margin:0 2px 2px 0;border-radius:3px}.buttons{position:absolute;right:13px;top:12px;display:grid;grid-template-columns:1fr;grid-gap:4px}}"}}export{o as list_page};