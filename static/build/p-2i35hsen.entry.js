import{r as t,h as e}from"./p-3278c467.js";import{U as i}from"./p-f320b6b4.js";const s=1;class o{constructor(e){t(this,e),this.now=new Date,this.hour=4,this.min=20,this.base=12,this.meridian=s,this.autoSet=!0,this.setTime=t=>{const{hour:e,min:s}=i.setTime(t,this.base);this.hour=e,this.min=s},this.setMeridian=t=>{this.meridian=t},this.setTimezone=t=>{this.timezone=t},this.setAutoSet=t=>{this.autoSet=t},this.submitPayload=async()=>{const{hour:t,min:e,meridian:s,timezone:o}=this,n={hour:t,min:e,meridian:s,timezone:o};await i.post("boxinfo",n)&&this.history.replace("/list")}}componentDidLoad(){this.interval=setInterval(()=>{this.now=new Date},1e3)}componentDidUnload(){clearInterval(this.interval)}render(){const t=Intl.DateTimeFormat().resolvedOptions().timeZone;return e("div",{class:"setup"},e("nav-header",null),e("h1",null,"Setup Box"),this.autoSet?e("div",{class:"topInfo"},e("h2",null,"Is this the Current Time and Timezone?"),e("div",{class:"buttons"},e("post-button",{onClick:()=>this.submitPayload()},"Yes"),e("post-button",{onClick:()=>this.setAutoSet(!1)},"No"))):e("div",{class:"topInfo"},e("h2",null,"Please Set Your Time to Begin"),e("div",{class:"saveButton"},e("post-button",{onClick:this.submitPayload},"Save"))),e("div",{class:"spacer"}),e("time-setter",{label:this.autoSet?"Current Time":"Select Time",currentTime:this.now,hour:this.hour,min:this.min,meridian:this.meridian,base:this.base,setMeridian:this.setMeridian,setTime:this.setTime,autoSet:this.autoSet,setAutoSet:this.setAutoSet}),e("h2",null,this.autoSet?"Is this Your Timezone? (city may vary)":"Select Timezone"),e("time-zone",{selected:t,setTimezone:this.setTimezone}),e("div",{class:"spacer"}),this.autoSet?"":e("div",{class:"saveButton"},e("post-button",{onClick:this.submitPayload},"Save")))}static get style(){return".setup{max-width:420px;margin:0 auto;padding:0 8px}h1{font-size:35px;margin-bottom:0}h1,h2{color:#fff;font-weight:100;text-align:center}h2{font-size:18px;margin:20px 0 10px 0}.buttons{display:grid;grid-template-columns:1fr 1fr;grid-gap:32px}.spacer{height:20px}.topInfo{min-height:74px}"}}export{o as setup_page};